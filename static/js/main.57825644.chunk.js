(this.webpackJsonpsgcrm=this.webpackJsonpsgcrm||[]).push([[0],{21:function(e){e.exports=JSON.parse('{"name":"sgcrm","homepage":"http://OdinRossy.github.io/sgcrm","version":"0.1.0","private":true,"dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.28","@fortawesome/free-solid-svg-icons":"^5.13.0","@fortawesome/react-fontawesome":"^0.1.9","bootstrap":"^4.5.0","classnames":"^2.2.6","libphonenumber-js":"^1.7.51","prop-types":"^15.7.2","react":"^16.8.2","react-bootstrap":"^1.0.1","react-dom":"^16.8.2","react-fontawesome":"^1.7.1","react-router-dom":"^5.2.0","react-scripts":"^3.2.0","react-select-country-list":"^2.1.2"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":[">0.2%","not dead","not ie <= 11","not op_mini all"],"devDependencies":{"gh-pages":"^2.2.0"}}')},44:function(e,t,a){e.exports=a.p+"static/media/Dual Ball-0.9s-200px.248c6acf.svg"},51:function(e,t,a){e.exports=a(88)},56:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),o=a.n(l),c=a(14),i=a(16),s=a(10),u=(a(56),a(7)),m={anonymous:function(){return d.anonymous},admin:function(){return d.admin},manager:function(){return d.manager},isRoleValid:function(e){return Object.values(d).includes(e)},getUserIcon(e){switch(e){case this.anonymous():return u.k;case this.admin():return u.l;case this.manager():return u.m;default:return u.k}}},d={anonymous:"ROLE_ANONYMOUS",admin:"ROLE_ADMIN",manager:"ROLE_MANAGER"},p=a(21),f=p.version,h=(p.dependencies.react,p.homepage),E=p.name,b="/".concat(function(){var e=h.split("/");return e&&e.length>0?e[e.length-1]:E}()),v={HOME:{path:b,roles:[m.admin(),m.manager(),m.anonymous()]},CLIENTS:{path:b+"/clients/",roles:[m.admin(),m.manager()]},CLIENT:{path:b+"/clients/:id",roles:[m.admin(),m.manager()]},OPERATIONS:{path:b+"/operations/",roles:[m.admin(),m.manager()]},WORKERS:{path:b+"/workers/",roles:[m.admin(),m.manager()]},CALENDAR:{path:b+"/calendar/",roles:[m.admin(),m.manager()]},SETTINGS:{path:b+"/settings",roles:[m.admin(),m.manager()]},LOGIN:{path:b+"/login",roles:[m.admin(),m.manager(),m.anonymous()]}},g={home:function(){return v.HOME.path},clients:function(){return v.CLIENTS.path},client:function(){return v.CLIENT.path},operations:function(){return v.OPERATIONS.path},workers:function(){return v.WORKERS.path},calendar:function(){return v.WORKERS.path},settings:function(){return v.SETTINGS.path},login:function(){return v.LOGIN.path},roles:function(){return{home:function(){return v.HOME.roles},clients:function(){return v.CLIENTS.roles},client:function(){return v.CLIENT.roles},operations:function(){return v.OPERATIONS.roles},workers:function(){return v.WORKERS.roles},calendar:function(){return v.WORKERS.roles},settings:function(){return v.SETTINGS.roles},login:function(){return v.LOGIN.roles}}},breadcrumbs:function(){return{home:function(){return{label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",href:v.HOME.path}},clients:function(){return{label:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",href:v.CLIENTS.path}},client:function(e,t){return{label:t,href:v.HOME.path+e}},operations:function(){return{label:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",href:v.OPERATIONS.path}},workers:function(){return{label:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",href:v.WORKERS.path}},calendar:function(){return{label:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",href:v.CALENDAR.path}},settings:function(){return{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",href:v.SETTINGS.path}}}},isPathExists:function(e){return Object.values(v).some((function(t){return t.path===e}))},isPathActive:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,n=t.match(e);return n&&(t===a||n[0]!==a)}},I=a(39),N=new function e(){var t=this;Object(I.a)(this,e),this.getToolBarLogOutItemProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u0412\u044b\u0439\u0442\u0438";return{id:"logout",label:t,faIcon:u.i,onClick:e,className:"text-danger"}},this.getTopToolBarItems=function(e){var a="home",n="clients",r="operations",l="workers",o="calendar",c=[{id:a,label:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",href:g.home(),faIcon:u.f},{id:n,label:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",href:g.clients(),faIcon:u.n},{id:r,label:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",href:g.operations(),faIcon:u.b},{id:l,label:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",href:g.workers(),faIcon:u.m},{id:o,label:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c",href:g.calendar(),faIcon:u.c}];switch(e){case m.admin():return t.filterItemsByIds(c,a,n,r,l);case m.manager():return t.filterItemsByIds(c,a,n,o,r);case m.anonymous():return t.filterItemsByIds(c,a);default:return[]}},this.getBottomToolBarItems=function(e){return e?[{id:"settings",label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",href:g.settings(),faIcon:u.d,forceShowIcon:!0}]:[]},this.filterItemsByIds=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return e.filter((function(e){return a.includes(e.id)}))}},O={getToolBarProps(e,t,a,n){var r=N.getTopToolBarItems(t.role),l=N.getBottomToolBarItems(t.role),o=N.getToolBarLogOutItemProps(n);return{brandItemProps:{appName:a.name.toLowerCase()},logOutItemProps:o,topItems:r,bottomItems:l,isAuthenticated:e,statusBarProps:{appInfo:a},isPathActive:g.isPathActive}},getLoginFormProps:(e,t,a)=>({userDetails:e,error:null,onSubmit:t,inputChangeHandler:a}),getInitialUserDetails:()=>({username:"",password:"",role:m.anonymous()}),isProdEnv:()=>!1},y=(a(57),a(3)),w=a.n(y),C=a(13),k=(a(63),a(9)),S=function(e){var t=e.href,a=e.label,n=e.isActive,l=e.faIcon;e.forceShowIcon;return r.a.createElement(k.b,{to:t,className:w()("tool-bar-item",{active:n})},r.a.createElement(C.a,{icon:l}),a)},j=(a(66),function(e){var t=e.appName,a=void 0===t?"App":t;return r.a.createElement("div",{className:w()("tool-bar-item","brand","noselect")},r.a.createElement("span",null,a))}),T=(a(67),function(e){var t=e.label,a=e.faIcon,n=e.onClick,l=e.className;return r.a.createElement("div",{className:w.a.apply(void 0,["tool-bar-item","tool-bar-log-out-item"].concat(Object(c.a)(l))),onClick:n},r.a.createElement(C.a,{icon:a})," ",t)}),A=a(6),P=(a(68),function(e){var t=e.appInfo;return r.a.createElement("div",{className:"status-bar"},r.a.createElement("div",{className:"left"},"v. ",t.version))}),L=function(e){var t=e.brandItemProps,a=e.logOutItemProps,n=e.statusBarProps,l=e.topItems,o=e.bottomItems,c=e.isAuthenticated,i=e.isPathActive,s=Object(A.f)().pathname,u=function(e){return e.map((function(e){return r.a.createElement(S,Object.assign({key:e.id},e,{isActive:i(e.href,s)}))}))};return r.a.createElement("div",{className:"vertical-menu shadow"},r.a.createElement(j,t),u(l),r.a.createElement("div",{className:"bottom-container"},u(o),c?r.a.createElement(T,a):null,r.a.createElement(P,n)))},x=Object(n.createContext)({username:"",role:m.anonymous()}),R=(a(69),a(95)),D=function(e){var t=e.items,a=void 0===t?[]:t;if(!a||0===a.length)return null;var n=a.map((function(e,t){return r.a.createElement(R.a.Item,{active:t===a.length-1,key:t,linkAs:k.b,linkProps:{to:e.href}},e.label)}));return r.a.createElement(R.a,null,n)},G=function(e){var t=e.title,a=e.breadcrumbItems,n=void 0===a?[]:a,l=e.children;return r.a.createElement("div",{className:"default-page"},t?r.a.createElement("div",{className:"title"},r.a.createElement("h2",null,t)):null,n.length?r.a.createElement("div",{className:"mt-4"},r.a.createElement(D,{items:n})):null,l)},B=(a(70),function(e){var t=e.children;return r.a.createElement("div",{className:"panel"},t)}),M=function(e){if(e.status>=200&&e.status<300)return e.json();var t=new Error(e.statusText);throw t.response=e,t},_=function(e){$.writeToken(e),window.location.pathname=g.home()},J=a(42),H=a(22),U=a.n(H),F=a(32),K=function(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.auth?JSON.parse(localStorage.auth).access_token:null)}},W={testConnection(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;console.log("Test connection..");var n=function(){fetch(V("/api/testConnection"),{headers:K()}).then((function(){e(!0),console.log("Connected to server.")})).catch((function(t){e(!1),console.error("Not connected to server. Error:",t)}))};a>0?(t(),setTimeout((function(){n()}),a)):n()},pathNames:()=>({login:"/api/login",refreshToken:"/oauth/access_token"}),getClients:()=>Y(V("/api/client")),getClient:e=>Y(V("/api/client/".concat(e)))},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://localhost:8080";return"".concat(t).concat(e)},z=function(){var e=Object(F.a)(U.a.mark((function e(t){var a,n,r=arguments;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.length>1&&void 0!==r[1]?r[1]:{}).headers=Object(i.a)(Object(i.a)({},a.headers),K()),e.next=4,fetch(t,a);case 4:if(!(n=e.sent).ok){e.next=7;break}return e.abrupt("return",n);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(F.a)(U.a.mark((function e(t){var a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:return a=e.sent,e.abrupt("return",a.json());case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),q=function(e,t){console.error(e),t&&t.call()},Q=W.pathNames(),X=Q.login,Z=Q.refreshToken,$={getRole(){var e=JSON.parse(localStorage.auth),t=m.anonymous();if(e&&e.roles){var a=e.roles;if(Array.isArray(a)&&a.length>0)return m.isRoleValid(a[0])?a[0]:t}return null},login(e){fetch(V(X),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(M).then(_).catch(q)},writeToken(e){localStorage.auth=JSON.stringify(e)},removeToken(){delete localStorage.auth},checkIsTokenExists:()=>!!localStorage.auth,refreshToken(){return fetch(V(Z),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:J.stringify({grant_type:"refresh_token",refresh_token:JSON.parse(localStorage.auth).refresh_token})}).then(M).then(this.writeToken).catch((function(){throw new Error("Unable to refresh!")}))},checkAuthEndpoint:()=>z(V("/api/checkAuth"))},ee=a(49),te=Object(n.createContext)(null),ae=function(e){var t=e.children,a=e.roles,l=Object(ee.a)(e,["children","roles"]),o=Object(n.useContext)(x),c=Object(n.useContext)(te);return r.a.createElement(A.b,Object.assign({},l,{render:function(e){var n=e.location;return function(e,t){return t.includes(e)}(o.role,a)?t:r.a.createElement(A.a,{to:{pathname:c.login(),state:{from:n}}})}}))},ne=ae;ae.defaultProps={roles:[]};a(74);var re=a(93),le=a(90),oe=function(e){var t=e.title,a=e.onSubmit,n=e.recoverPasswordPathname,l=e.userDetails,o=e.onInputChange;return r.a.createElement(G,null,r.a.createElement("div",{className:"login-form shadow"},r.a.createElement("div",{className:"title"},r.a.createElement("h2",null,t)),r.a.createElement(re.a,{onSubmit:a},r.a.createElement(re.a.Group,{controlId:"username"},r.a.createElement(re.a.Label,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement(re.a.Control,{type:"text",name:"username",value:l.username,onChange:o,autoComplete:"username",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),r.a.createElement(re.a.Text,{className:"text-muted"},"\u041c\u044b \u0437\u0430\u0431\u043e\u0442\u0438\u043c\u0441\u044f \u043e \u043a\u043e\u043d\u0444\u0435\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0412\u0430\u0448\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445.")),r.a.createElement(re.a.Group,{controlId:"password"},r.a.createElement(re.a.Label,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c:"),r.a.createElement(re.a.Control,{type:"password",name:"password",value:l.password,onChange:o,autoComplete:"current-password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(re.a.Text,null,r.a.createElement(k.b,{to:n},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"))),r.a.createElement(le.a,{variant:"primary",type:"submit"},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"))))};oe.defaultProps={title:"Login form",onSubmit:function(e){return e.preventDefault()},recoverPasswordPathname:"/recoverPassword",userDetails:{username:"",password:""},onInputChange:function(){}};var ce=oe,ie=(a(76),a(77),function(e){var t=e.id,a=e.shortName,n=e.paymentInfo,l=void 0===n?{}:n,o=e.webSite,c=e.phone,i=e.email,s=e.isActive,u=w()("client-card","shadow",{active:s});return r.a.createElement("div",{className:u},r.a.createElement("div",{className:"title"},r.a.createElement(k.b,{to:"".concat(t)},r.a.createElement("h3",null,a))),r.a.createElement("hr",null),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"item"},"\u0423\u041d\u041f: ",l.payerAccountNumber),r.a.createElement("div",{className:"item"},"\u0422\u0435\u043b.: ",r.a.createElement("a",{href:"tel:".concat(c)},c)),r.a.createElement("div",{className:"item"},"E-mail: ",r.a.createElement("a",{href:"mailto:".concat(i)},i)),r.a.createElement("div",{className:"item"},"\u0412\u0435\u0431-\u0441\u0430\u0439\u0442: ",r.a.createElement("a",{href:o},o))))}),se=a(91),ue=a(43),me=function(e){var t=e.data,a=void 0===t?[]:t,n=e.CardComponent;return r.a.createElement(r.a.Fragment,null,function(e){return function(e){var t=[];if(Array.isArray(e))for(var a=Object(c.a)(e);a.length;)t.push(a.splice(0,3));return t}(e).map((function(e,t){return r.a.createElement(se.a,{key:t},e.map((function(e,t){return r.a.createElement(ue.a,{key:t,lg:4},r.a.createElement(n,Object.assign({key:e.id},e)))})))}))}(a))},de=(a(78),a(44)),pe=a.n(de),fe=function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:pe.a,alt:"loading.."}))},he=(a(79),a(94)),Ee=function(e){var t=e.title,a=e.text,n=e.redirectPath;return r.a.createElement(G,null,r.a.createElement("div",{className:"error"},r.a.createElement(he.a,{variant:"danger"},r.a.createElement(he.a.Heading,null,r.a.createElement(C.a,{icon:u.e})," ",t),r.a.createElement("p",null,a,n?r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 ",r.a.createElement(he.a.Link,{href:n},"\u0433\u043b\u0430\u0432\u043d\u0443\u044e")," \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.")):null))))};Ee.defaultProps={title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430.",text:"\u041d\u0430\u0448\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0443\u0436\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430\u0434 \u0440\u0435\u0448\u0435\u043d\u0438\u0435\u043c \u0432\u043e\u0437\u043d\u0438\u043a\u0448\u0435\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b.",redirectPath:"/"};var be=Ee,ve=function(e){var t=e.getData,a=e.filterData,l=e.Component,o=Object(n.useState)([]),c=Object(s.a)(o,2),i=c[0],u=c[1],m=Object(n.useState)(!1),d=Object(s.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(!1),E=Object(s.a)(h,2),b=E[0],v=E[1],g=Object(A.g)().id;return Object(n.useEffect)((function(){var e=function(e){f(!0),v(!1),u(e)},a=function(e){console.error(e),f(!0),v(!0)};g?t(g).then(e).catch(a):t().then(e).catch(a)}),[t,g]),p?b?r.a.createElement(be,null):r.a.createElement(l,Object.assign({},e,{data:a(i)})):r.a.createElement(fe,null)};ve.defaultProps={filterData:function(e){return e}};var ge=ve,Ie=function(e){var t=e.title,a=e.filterData,l=e.getData,o=Object(n.useContext)(te);return r.a.createElement(G,{title:t,breadcrumbItems:[o.breadcrumbs().home(),o.breadcrumbs().clients()]},r.a.createElement("div",{className:"clients-page"},r.a.createElement(ge,{getData:l,filterData:a,Component:me,CardComponent:ie})))};Ie.defaultProps={title:"",data:[]};var Ne=Ie,Oe=(a(80),function(e){var t=e.title,a=Object(n.useContext)(te);return r.a.createElement(G,{title:t,breadcrumbItems:[a.breadcrumbs().home()]},r.a.createElement("div",{className:"home-page"}))}),ye=(a(81),a(92)),we=(a(82),function(e){var t=e.id,a=void 0===t?"":t,n=e.data,l=e.title,o=void 0===l?"":l,c=e.Component;return n?r.a.createElement("div",{className:"client-info"},r.a.createElement("div",{className:"title"},r.a.createElement("h4",null,o)),r.a.createElement(c,Object.assign({buildId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return t+e}},e))):r.a.createElement(fe,null)}),Ce=function(e){var t=e.data,a=e.readonly;return r.a.createElement("div",{className:"client-general-info"},r.a.createElement(re.a.Row,null,r.a.createElement(re.a.Group,{as:ue.a,lg:4,controlId:"shortName"},r.a.createElement(re.a.Label,null,"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(re.a.Control,{name:"shortName",value:t.shortName,disabled:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"})),r.a.createElement(re.a.Group,{as:ue.a,controlId:"fullName"},r.a.createElement(re.a.Label,null,"\u041f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(re.a.Control,{name:"fullName",value:t.fullName,disabled:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u043e\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}))),r.a.createElement(re.a.Row,null,r.a.createElement(re.a.Group,{as:ue.a,controlId:"email"},r.a.createElement(re.a.Label,null,"Email"),r.a.createElement(re.a.Control,{name:"email",value:t.email,disabled:a,type:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email"})),r.a.createElement(re.a.Group,{as:ue.a,controlId:"phone"},r.a.createElement(re.a.Label,null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),r.a.createElement(re.a.Control,{name:"phone",value:t.phone,disabled:a,placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})),r.a.createElement(re.a.Group,{as:ue.a,controlId:"fax"},r.a.createElement(re.a.Label,null,"\u0424\u0430\u043a\u0441"),r.a.createElement(re.a.Control,{name:"fax",value:t.fax,disabled:a,placeholder:"\u0424\u0430\u043a\u0441"}))))},ke=a(46),Se=a.n(ke),je=function(e){var t=e.data,a=e.buildId,n=e.readonly,l=Se()().getData()||[];return r.a.createElement("div",{className:"client-address-info"},r.a.createElement(re.a.Group,{controlId:a("address")},r.a.createElement(re.a.Label,null,"\u0410\u0434\u0440\u0435\u0441"),r.a.createElement(re.a.Control,{name:"address",value:t.addressString,disabled:n,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"})),r.a.createElement(re.a.Row,null,r.a.createElement(re.a.Group,{as:ue.a,controlId:a("city")},r.a.createElement(re.a.Label,null,"\u0413\u043e\u0440\u043e\u0434"),r.a.createElement(re.a.Control,{name:"city",value:t.city,disabled:n,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"})),r.a.createElement(re.a.Group,{as:ue.a,controlId:a("country")},r.a.createElement(re.a.Label,null,"\u0421\u0442\u0440\u0430\u043d\u0430"),r.a.createElement(re.a.Control,{as:"select",name:"country",disabled:n,value:t.countryISO2code},l.map((function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)})))),r.a.createElement(re.a.Group,{as:ue.a,lg:3,controlId:a("postcode")},r.a.createElement(re.a.Label,null,"\u0418\u043d\u0434\u0435\u043a\u0441"),r.a.createElement(re.a.Control,{name:"postcode",value:t.postcode,disabled:n,placeholder:"\u0418\u043d\u0434\u0435\u043a\u0441"}))))},Te=function(e){var t=e.data,a=e.readonly;return r.a.createElement("div",{className:"client-payment-info"},r.a.createElement(re.a.Row,null,r.a.createElement(re.a.Group,{as:ue.a,controlId:"bankName"},r.a.createElement(re.a.Label,null,"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430"),r.a.createElement(re.a.Control,{name:"bankName",value:t.bankName,disabled:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0430\u043d\u043a\u0430"})),r.a.createElement(re.a.Group,{as:ue.a,lg:4,controlId:"bankIdentificationCode"},r.a.createElement(re.a.Label,null,"\u0411\u0418\u041a"),r.a.createElement(re.a.Control,{name:"bankIdentificationCode",value:t.bankIdentificationCode,disabled:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0411\u0418\u041a"}))),r.a.createElement(re.a.Row,null,r.a.createElement(re.a.Group,{as:ue.a,controlId:"payerAccountNumber"},r.a.createElement(re.a.Label,null,"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043b\u0430\u0442\u0435\u043b\u044c\u0449\u0438\u043a\u0430 (\u0423\u041d\u041f)"),r.a.createElement(re.a.Control,{name:"payerAccountNumber",value:t.payerAccountNumber,disabled:a,type:"payerAccountNumber",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0423\u041d\u041f"})),r.a.createElement(re.a.Group,{as:ue.a,controlId:"checkingAccountNumber"},r.a.createElement(re.a.Label,null,"\u0420\u0430\u0441\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0451\u0442"),r.a.createElement(re.a.Control,{name:"checkingAccountNumber",value:t.checkingAccountNumber,disabled:a,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0430\u0441\u0441\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0447\u0451\u0442"}))))},Ae=function(e){var t=e.data,a=e.onSubmit,l=e.onMount;Object(n.useEffect)((function(){l(t)}),[l,t]);var o={show:"show",edit:"edit",create:"create"},c=function(e){return o[e]&&"show"===o[e]},i=Object(n.useState)(o.show),m=Object(s.a)(i,2),d=m[0],p=m[1],f=function(e){e.preventDefault();c(d)||a(function(e){return o[t=e]&&"edit"===o[t]?"put":function(e){return o[e]&&"create"===o[e]}(e)?"post":null;var t}(d),t)},h=c(d);return r.a.createElement("div",{className:"client-details-view"},r.a.createElement(re.a,{onSubmit:function(e){return f(e)}},r.a.createElement("div",{className:"float-right"},r.a.createElement(ye.a,{"aria-label":"Basic example"},c(d)?r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{variant:"outline-primary",type:"button",onClick:function(e){e.preventDefault(),p(o.edit)}},r.a.createElement(C.a,{icon:u.g})," \u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(le.a,{variant:"outline-danger"},r.a.createElement(C.a,{icon:u.j}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{variant:"primary",type:"submit"},r.a.createElement(C.a,{icon:u.h})," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(le.a,{variant:"outline-secondary",onClick:function(){return p(o.show)}},r.a.createElement(C.a,{icon:u.a}))))),r.a.createElement(we,{title:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f:",data:t,readonly:h,Component:Ce}),r.a.createElement(se.a,null,r.a.createElement(ue.a,null,r.a.createElement(we,{title:"\u042e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0430\u0434\u0440\u0435\u0441:",id:"legal-",data:t.legalAddress,readonly:h,Component:je})),r.a.createElement(ue.a,null,r.a.createElement(we,{title:"\u041f\u043e\u0447\u0442\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441:",id:"mailing-",data:t.mailingAddress,readonly:h,Component:je}))),r.a.createElement(we,{title:"\u041f\u043b\u0430\u0442\u0435\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f:",data:t.paymentInfo,readonly:h,Component:Te})))},Pe=function(e){var t=e.onSubmit,a=e.getData,l=Object(n.useContext)(te),o=Object(n.useState)("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)([l.breadcrumbs().home(),l.breadcrumbs().clients(),l.breadcrumbs().client("","\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")]),p=Object(s.a)(d,2),f=p[0],h=p[1];return r.a.createElement(G,{title:u,breadcrumbItems:f},r.a.createElement("div",{className:"client-details"},r.a.createElement(ge,{getData:a,onMount:function(e){var t=e.id,a=e.shortName;u!==a&&m(a);var n=Object(c.a)(f),r=n.length-1;n[r].label!==a&&(n[r]=l.breadcrumbs().client(t,a),h(n))},onSubmit:t,Component:Ae})))},Le=function(){var e=Object(n.useState)(O.getInitialUserDetails()),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),u=Object(s.a)(o,2),d=u[0],p=u[1],h=Object(n.useState)(!1),b=Object(s.a)(h,2),v=b[0],I=b[1];Object(n.useEffect)((function(){var e=function(e){a.role!==e&&l(Object(i.a)(Object(i.a)({},a),{},{role:e}))};$.checkIsTokenExists()?$.checkAuthEndpoint().then((function(t){p(!0),e($.getRole()),I(!0)})).catch((function(t){p(!1),e(m.anonymous()),I(!0),console.error("There has been a problem with your fetch operation: ",t.message)})):(I(!0),p(!1),e(m.anonymous()))}),[a]);return v?r.a.createElement("div",{className:"app"},r.a.createElement(te.Provider,{value:g},r.a.createElement(x.Provider,{value:{username:a.username,role:a.role}},r.a.createElement(k.a,null,r.a.createElement(L,O.getToolBarProps(d,a,{name:E,version:f},(function(){$.removeToken(),p(!1),l(O.getInitialUserDetails())}))),r.a.createElement(B,null,r.a.createElement(ne,{path:g.login(),roles:g.roles().login()},r.a.createElement(ce,{title:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f",userDetails:a,onSubmit:function(e){e.preventDefault(),$.login(a)},onInputChange:function(e){var t=e.target,n=Object(i.a)({},a);n[t.name]=t.value,l(n)}})),r.a.createElement(ne,{exact:!0,path:g.home(),roles:g.roles().home()},r.a.createElement(Oe,{title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})),r.a.createElement(ne,{exact:!0,path:g.clients(),roles:g.roles().clients()},r.a.createElement(Ne,{title:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b",getData:W.getClients,filterData:function(e){return Object(c.a)(e).sort((function(e){return e.isActive?-1:1}))}})),r.a.createElement(ne,{path:g.client(),roles:g.roles().client()},r.a.createElement(Pe,{getData:W.getClient,onSubmit:function(e,t){console.debug("submit clientDetails",e,t)}})),r.a.createElement(ne,{path:g.operations(),roles:g.roles().operations()},r.a.createElement(G,{title:"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438",breadcrumbItems:[g.breadcrumbs().home(),g.breadcrumbs().operations()]})),r.a.createElement(ne,{path:g.workers(),roles:g.roles().workers()},r.a.createElement(G,{title:"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438",breadcrumbItems:[g.breadcrumbs().home(),g.breadcrumbs().workers()]})),r.a.createElement(ne,{path:g.settings(),roles:g.roles().settings()},r.a.createElement(G,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",breadcrumbItems:[g.breadcrumbs().home(),g.breadcrumbs().settings()]}))))))):r.a.createElement(fe,null)};a(86),a(87);o.a.render(r.a.createElement(Le,null),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.57825644.chunk.js.map